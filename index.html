<!doctype html>
<html lang="uk">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>–ù–∞–≤—á–∞–ª—å–Ω–∏–π —Ü–µ–Ω—Ç—Ä! üìöüéì</title>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Comic Sans MS", cursive, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                color: white;
                overflow-x: hidden;
            }

            .header {
                text-align: center;
                padding: 20px;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
            }

            .header h1 {
                font-size: 2.5rem;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .mode-selector {
                display: flex;
                gap: 10px;
                justify-content: center;
                margin: 15px 0;
            }

            .mode-btn {
                padding: 8px 16px;
                border: none;
                border-radius: 20px;
                font-size: 1rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.3);
                color: white;
            }

            .mode-btn.active {
                background: rgba(255, 255, 255, 0.9);
                color: #2d3436;
            }

            .score-display {
                font-size: 1.2rem;
                font-weight: bold;
                margin-top: 10px;
                display: none; /* –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ */
            }

            .tab-selector {
                display: flex;
                gap: 10px;
                justify-content: center;
                margin: 10px 0;
            }

            .tab-btn {
                padding: 10px 20px;
                border: none;
                border-radius: 25px;
                font-size: 1.1rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.2);
                color: white;
            }

            .tab-btn.active {
                background: rgba(255, 255, 255, 0.9);
                color: #2d3436;
                transform: scale(1.05);
            }

            .progress-bar {
                width: 100%;
                max-width: 300px;
                height: 10px;
                background: rgba(255, 255, 255, 0.3);
                border-radius: 5px;
                margin: 0 auto;
                overflow: hidden;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #ffeaa7, #fdcb6e);
                width: 0%;
                transition: width 0.5s ease;
                border-radius: 5px;
            }

            .main-content {
                flex: 1;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }

            .training-mode {
                display: none;
            }

            .training-mode.active {
                display: block;
            }

            .learning-mode.active {
                display: block;
            }

            .learning-mode {
                display: none;
            }

            .question-display {
                background: rgba(255, 255, 255, 0.9);
                border-radius: 20px;
                padding: 30px;
                margin-bottom: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
                text-align: center;
                min-width: 350px;
            }

            .question-emoji {
                font-size: 6rem;
                margin: 20px 0;
                animation: bounce 2s infinite ease-in-out;
            }

            .question-text {
                font-size: 1.8rem;
                color: #2d3436;
                font-weight: bold;
                margin-bottom: 20px;
            }

            .answer-options {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 15px;
                max-width: 400px;
                margin: 0 auto;
            }

            .answer-btn {
                aspect-ratio: 1;
                border: none;
                border-radius: 15px;
                font-size: 2rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.9);
                color: #2d3436;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }

            .answer-btn:disabled {
                cursor: not-allowed;
                opacity: 0.7;
            }

            .answer-btn:hover {
                transform: scale(1.1);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            }

            .answer-btn.correct {
                background: #00b894;
                color: white;
                animation: correctPulse 0.5s ease;
            }

            .answer-btn.incorrect {
                background: #e17055;
                color: white;
                animation: shake 0.5s ease;
            }

            @keyframes correctPulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.2);
                }
            }

            @keyframes shake {
                0%,
                100% {
                    transform: translateX(0);
                }
                25% {
                    transform: translateX(-5px);
                }
                75% {
                    transform: translateX(5px);
                }
            }

            .letter-display {
                background: rgba(255, 255, 255, 0.9);
                border-radius: 20px;
                padding: 30px;
                margin-bottom: 30px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
                text-align: center;
                min-width: 350px;
                transform: scale(1);
                transition: transform 0.3s ease;
            }

            .letter-display:hover {
                transform: scale(1.05);
            }

            .current-letter {
                font-size: 6rem;
                color: #2d3436;
                font-weight: bold;
                margin: 0;
                text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
                cursor: pointer;
                user-select: none;
                animation: letterPulse 2s infinite ease-in-out;
            }

            .emoji-display {
                font-size: 4rem;
                margin: 15px 0;
                animation: bounce 2s infinite ease-in-out;
            }

            @keyframes bounce {
                0%,
                100% {
                    transform: translateY(0);
                }
                50% {
                    transform: translateY(-10px);
                }
            }

            @keyframes letterPulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.1);
                }
            }

            .letter-info {
                margin-top: 15px;
                color: #2d3436;
            }

            .letter-name {
                font-size: 1.3rem;
                font-weight: bold;
                margin-bottom: 8px;
            }

            .letter-example {
                font-size: 1.4rem;
                color: #00b894;
                font-weight: bold;
                margin-bottom: 8px;
            }

            .letter-sound {
                font-size: 1rem;
                color: #636e72;
            }

            .controls {
                display: flex;
                gap: 20px;
                flex-wrap: wrap;
                justify-content: center;
                margin-bottom: 30px;
            }

            .btn {
                padding: 15px 25px;
                border: none;
                border-radius: 15px;
                font-size: 1.2rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            .btn-primary {
                background: linear-gradient(45deg, #00b894, #00cec9);
                color: white;
            }

            .btn-secondary {
                background: linear-gradient(45deg, #fdcb6e, #e17055);
                color: white;
            }

            .btn-accent {
                background: linear-gradient(45deg, #fd79a8, #e84393);
                color: white;
            }

            .btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            }

            .btn:active {
                transform: translateY(0);
            }

            .alphabet-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
                gap: 10px;
                max-width: 800px;
                margin-top: 20px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                backdrop-filter: blur(10px);
            }

            .alphabet-btn {
                aspect-ratio: 1;
                border: none;
                border-radius: 10px;
                font-size: 1.5rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s ease;
                background: rgba(255, 255, 255, 0.9);
                color: #2d3436;
            }

            .alphabet-btn:hover {
                transform: scale(1.1);
                background: #00b894;
                color: white;
            }

            .alphabet-btn.learned {
                background: #00b894;
                color: white;
            }

            .writing-area {
                width: 100%;
                max-width: 400px;
                height: 200px;
                background: rgba(255, 255, 255, 0.9);
                border-radius: 15px;
                margin: 20px 0;
                position: relative;
                border: 3px dashed #ddd;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #636e72;
                font-size: 1.2rem;
                cursor: pointer;
            }

            .celebration {
                color: #fdcb6e;
                position: fixed;
                top: 33%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 3rem;
                z-index: 1000;
                pointer-events: none;
                animation: celebrate 1s ease-out;
            }

            @keyframes celebrate {
                0% {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0);
                }
                50% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1.2);
                }
                100% {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(1);
                }
            }

            .target-score-setting {
                margin-top: 10px;
                font-size: 0.9rem;
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                flex-wrap: wrap;
            }

            .target-score-setting input {
                width: 80px;
                padding: 5px;
                border: none;
                border-radius: 5px;
                text-align: center;
                font-weight: bold;
            }

            .set-target-btn {
                padding: 5px 12px;
                border: none;
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.9);
                color: #2d3436;
                font-weight: bold;
                cursor: pointer;
                font-size: 0.8rem;
                transition: all 0.3s ease;
            }

            .set-target-btn:hover {
                background: white;
                transform: scale(1.05);
            }

            .victory-celebration {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                animation: victoryFade 0.5s ease-in;
            }

            .victory-content {
                background: linear-gradient(135deg, #00b894, #00cec9);
                padding: 40px;
                border-radius: 20px;
                text-align: center;
                color: white;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            }

            .victory-emoji {
                font-size: 6rem;
                margin-bottom: 20px;
                animation: bounce 1s infinite;
            }

            .victory-text {
                font-size: 2rem;
                font-weight: bold;
                margin-bottom: 20px;
            }

            .victory-score {
                font-size: 1.5rem;
                margin-bottom: 30px;
            }

            .continue-btn {
                padding: 15px 30px;
                border: none;
                border-radius: 15px;
                font-size: 1.2rem;
                font-weight: bold;
                background: white;
                color: #00b894;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .continue-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            @keyframes victoryFade {
                from {
                    opacity: 0;
                    transform: scale(0.8);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            @media (max-width: 768px) {
                .header h1 {
                    font-size: 2rem;
                }
                .current-letter {
                    font-size: 6rem;
                }
                .letter-display {
                    min-width: 250px;
                    padding: 30px;
                }
                .controls {
                    gap: 15px;
                }
                .btn {
                    padding: 12px 20px;
                    font-size: 1rem;
                }
            }

            .auth-panel {
                background: rgba(255, 255, 255, 0.1);
                padding: 15px;
                margin: 10px auto;
                border-radius: 15px;
                max-width: 400px;
                backdrop-filter: blur(10px);
            }

            .auth-content {
                text-align: center;
            }

            .auth-content h3 {
                margin-bottom: 15px;
                color: white;
                font-size: 1.2rem;
            }

            .auth-btn {
                padding: 10px 20px;
                margin: 5px;
                border: none;
                border-radius: 10px;
                background: rgba(255, 255, 255, 0.9);
                color: #2d3436;
                cursor: pointer;
                font-weight: bold;
                transition: all 0.3s ease;
                font-size: 0.9rem;
            }

            .auth-btn:hover {
                transform: scale(1.05);
                background: white;
            }

            .auth-btn.small {
                padding: 5px 10px;
                font-size: 0.8rem;
            }

            .user-info {
                text-align: center;
                color: white;
                margin: 10px 0;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <header class="header">
            <h1>üéì –ù–∞–≤—á–∞–ª—å–Ω–∏–π —Ü–µ–Ω—Ç—Ä! üéì</h1>
            <!-- –ü–∞–Ω–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó -->
            <div class="auth-panel" id="authPanel">
                <div class="auth-content">
                    <h3>üîê –í—Ö—ñ–¥ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É</h3>
                    <button class="auth-btn" onclick="signInAnonymously()">
                        üë§ –£–≤—ñ–π—Ç–∏ —è–∫ –≥—ñ—Å—Ç—å
                    </button>
                    <button class="auth-btn" onclick="signInWithGoogle()">
                        üìß –£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                    </button>
                </div>
            </div>

            <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ -->
            <div class="user-info" id="userInfo" style="display: none">
                <span id="userName"></span>
                <button class="auth-btn small" onclick="signOut()">
                    –í–∏–π—Ç–∏
                </button>
            </div>
            <!-- –¢–∞–±–∏ –¥–ª—è –≤–∏–±–æ—Ä—É –∫–æ–Ω—Ç–µ–Ω—Ç—É -->
            <div class="tab-selector">
                <button
                    class="tab-btn active"
                    id="lettersTab"
                    onclick="switchTab('letters')"
                >
                    üî§ –ë—É–∫–≤–∏
                </button>
                <button
                    class="tab-btn"
                    id="numbersTab"
                    onclick="switchTab('numbers')"
                >
                    üî¢ –¶–∏—Ñ—Ä–∏
                </button>
            </div>

            <div class="mode-selector">
                <button
                    class="mode-btn active"
                    id="learningBtn"
                    onclick="switchMode('learning')"
                >
                    üìñ –í–∏–≤—á–µ–Ω–Ω—è
                </button>
                <button
                    class="mode-btn"
                    id="trainingBtn"
                    onclick="switchMode('training')"
                >
                    üèÜ –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
                </button>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">–ü—Ä–æ–≥—Ä–µ—Å: 0/33</p>
            <div class="score-display" id="scoreDisplay">–†–∞—Ö—É–Ω–æ–∫: 0</div>
            <div class="target-score-setting">
                <label for="targetScoreInput">–¶—ñ–ª—å –¥–ª—è –¥–∏—Ç–∏–Ω–∏: </label>
                <input
                    type="number"
                    id="targetScoreInput"
                    value="0"
                    min="0"
                    max="500"
                    step="10"
                    placeholder="0 = –±–µ–∑ –ª—ñ–º—ñ—Ç—ñ–≤"
                />
                <button class="set-target-btn" onclick="setTargetScore()">
                    –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏
                </button>
            </div>
        </header>

        <main class="main-content">
            <!-- –†–µ–∂–∏–º –Ω–∞–≤—á–∞–Ω–Ω—è -->
            <div class="learning-mode active" id="learningMode">
                <div class="letter-display" id="letterDisplay">
                    <div class="current-letter" id="currentLetter">–ê</div>
                    <div class="emoji-display" id="emojiDisplay">üçé</div>
                    <div class="letter-info">
                        <div class="letter-name" id="letterName">–ê - "–ê"</div>
                        <div class="letter-example" id="letterExample">
                            –ê —è–∫ –ê–∏—Å—Ç
                        </div>
                        <div class="letter-sound" id="letterSound">
                            –ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –±—É–∫–≤—É, —â–æ–± –ø–æ—á—É—Ç–∏ –∑–≤—É–∫!
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" onclick="playSound()">
                        üîä –û–∑–≤—É—á–∏—Ç–∏
                    </button>
                    <button
                        class="btn btn-secondary"
                        onclick="previousLetter()"
                    >
                        ‚¨ÖÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—è
                    </button>
                    <button class="btn btn-secondary" onclick="nextLetter()">
                        ‚û°Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∞
                    </button>
                    <button class="btn btn-accent" onclick="markAsLearned()">
                        ‚úÖ –í–∏–≤—á–∏–≤!
                    </button>
                </div>

                <div
                    class="writing-area"
                    id="writingArea"
                    onclick="practiceWriting()"
                >
                    ‚úèÔ∏è –ù–∞—Ç–∏—Å–Ω–∏, —â–æ–± –ø–æ–ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—Ç–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è
                </div>

                <div class="alphabet-grid" id="alphabetGrid"></div>
            </div>

            <!-- –†–µ–∂–∏–º —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è -->
            <div class="training-mode" id="trainingMode">
                <div class="question-display" id="questionDisplay">
                    <div class="question-emoji" id="questionEmoji">üçé</div>
                    <div class="question-text" id="questionText">
                        –Ø–∫–∞ —Ü–µ –±—É–∫–≤–∞?
                    </div>
                </div>

                <div class="answer-options" id="answerOptions">
                    <!-- –í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                </div>
            </div>
        </main>

        <script>
            const firebaseConfig = {
                apiKey: "AIzaSyCcS5HMIhvsHkGq7hjjUYUtuPX8IlWtEs4",
                authDomain: "lear-9d1be.firebaseapp.com",
                projectId: "lear-9d1be",
                storageBucket: "lear-9d1be.firebasestorage.app",
                messagingSenderId: "739241285252",
                appId: "1:739241285252:web:b3f725bd09fe165bcc14d1",
                measurementId: "G-J44H9VDX6K",
            };

            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();

            let currentUser = null;

            // –§—É–Ω–∫—Ü—ñ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
            function signInAnonymously() {
                auth.signInAnonymously()
                    .then(() => {
                        showCelebration("üë§ –£–≤—ñ–π—à–ª–∏ —è–∫ –≥—ñ—Å—Ç—å!");
                    })
                    .catch((error) => {
                        console.error("–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É:", error);
                        alert("–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.");
                    });
            }

            function signInWithGoogle() {
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider)
                    .then(() => {
                        showCelebration("üìß –£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google!");
                    })
                    .catch((error) => {
                        console.error("–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É —á–µ—Ä–µ–∑ Google:", error);
                        alert("–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É —á–µ—Ä–µ–∑ Google. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.");
                    });
            }

            function signOut() {
                auth.signOut().then(() => {
                    showCelebration("üëã –î–æ –ø–æ–±–∞—á–µ–Ω–Ω—è!");
                    // –û—á–∏—â–∞—î–º–æ –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ
                    learnedLetters = [];
                    learnedNumbers = [];
                    score = 0;
                    updateDisplay();
                    updateProgress();
                });
            }

            // –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
            auth.onAuthStateChanged((user) => {
                currentUser = user;
                updateAuthUI();

                if (user) {
                    loadProgressFromCloud();
                }
            });

            function updateAuthUI() {
                const authPanel = document.getElementById("authPanel");
                const userInfo = document.getElementById("userInfo");
                const userName = document.getElementById("userName");

                if (currentUser) {
                    authPanel.style.display = "none";
                    userInfo.style.display = "block";
                    userName.textContent = currentUser.isAnonymous
                        ? "üë§ –ì—ñ—Å—Ç—å"
                        : `üìß ${currentUser.displayName || currentUser.email}`;
                } else {
                    authPanel.style.display = "block";
                    userInfo.style.display = "none";
                }
            }

            // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –≤ —Ö–º–∞—Ä—É
            async function saveProgressToCloud() {
                if (!currentUser) return;

                const progress = {
                    learnedLetters: learnedLetters,
                    learnedNumbers: learnedNumbers,
                    score: score,
                    targetScore: targetScore,
                    currentTab: currentTab,
                    lastUpdated:
                        firebase.firestore.FieldValue.serverTimestamp(),
                };

                try {
                    await db
                        .collection("userProgress")
                        .doc(currentUser.uid)
                        .set(progress);
                    console.log("‚úÖ –ü—Ä–æ–≥—Ä–µ—Å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!");
                } catch (error) {
                    console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:", error);
                }
            }

            // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑ —Ö–º–∞—Ä–∏
            async function loadProgressFromCloud() {
                if (!currentUser) return;

                try {
                    const doc = await db
                        .collection("userProgress")
                        .doc(currentUser.uid)
                        .get();

                    if (doc.exists) {
                        const data = doc.data();
                        learnedLetters = data.learnedLetters || [];
                        learnedNumbers = data.learnedNumbers || [];
                        score = data.score || 0;
                        targetScore = data.targetScore || 0;
                        currentTab = data.currentTab || "letters";

                        // –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ–ª–µ —Ü—ñ–ª—å–æ–≤–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É
                        document.getElementById("targetScoreInput").value =
                            targetScore;

                        updateDisplay();
                        updateProgress();
                        showCelebration("üì• –ü—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!");
                    }
                } catch (error) {
                    console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:", error);
                }
            }

            const ukrainianAlphabet = [
                {
                    letter: "–ê",
                    name: "–ê",
                    sound: "–∞",
                    emoji: "üçç",
                    word: "–ê–Ω–∞–Ω–∞—Å",
                    example: "–ê ‚Äî –∞–Ω–∞–Ω–∞—Å üçç",
                },
                {
                    letter: "–ë",
                    name: "–ë–µ",
                    sound: "–±",
                    emoji: "üêù",
                    word: "–ë–¥–∂–æ–ª–∞",
                    example: "–ë ‚Äî –±–¥–∂–æ–ª–∞ üêù",
                },
                {
                    letter: "–í",
                    name: "–í–µ",
                    sound: "–≤",
                    emoji: "üêª",
                    word: "–í–µ–¥–º—ñ–¥—å",
                    example: "–í ‚Äî –≤–µ–¥–º—ñ–¥—å üêª",
                },
                {
                    letter: "–ì",
                    name: "–ì–µ",
                    sound: "–≥",
                    emoji: "üéÉ",
                    word: "–ì–∞—Ä–±—É–∑",
                    example: "–ì ‚Äî –≥–∞—Ä–±—É–∑ üéÉ",
                },
                {
                    letter: "“ê",
                    name: "“ê–µ",
                    sound: "“ë",
                    emoji: "üîò",
                    word: "“ê—É–¥–∑–∏–∫",
                    example: "“ê ‚Äî “ë—É–¥–∑–∏–∫ üîò",
                },
                {
                    letter: "–î",
                    name: "–î–µ",
                    sound: "–¥",
                    emoji: "üçà",
                    word: "–î–∏–Ω—è",
                    example: "–î ‚Äî –¥–∏–Ω—è üçà",
                },
                {
                    letter: "–ï",
                    name: "–ï",
                    sound: "–µ",
                    emoji: "üöú",
                    word: "–ï–∫—Å–∫–∞–≤–∞—Ç–æ—Ä",
                    example: "–ï ‚Äî –µ–∫—Å–∫–∞–≤–∞—Ç–æ—Ä üöú",
                },
                {
                    letter: "–Ñ",
                    name: "–Ñ",
                    sound: "—î",
                    emoji: "ü¶ù",
                    word: "–Ñ–Ω–æ—Ç",
                    example: "–Ñ ‚Äî —î–Ω–æ—Ç ü¶ù",
                },
                {
                    letter: "–ñ",
                    name: "–ñ–µ",
                    sound: "–∂",
                    emoji: "ü¶í",
                    word: "–ñ–∏—Ä–∞—Ñ–∞",
                    example: "–ñ ‚Äî –∂–∏—Ä–∞—Ñ–∞ ü¶í",
                },
                {
                    letter: "–ó",
                    name: "–ó–µ",
                    sound: "–∑",
                    emoji: "üêç",
                    word: "–ó–º—ñ—è",
                    example: "–ó ‚Äî –∑–º—ñ—è üêç",
                },
                {
                    letter: "–ò",
                    name: "–ò",
                    sound: "–∏",
                    emoji: "üç¨",
                    word: "–ò—Ä–∏—Å–∫–∞",
                    example: "–ò ‚Äî —ñ—Ä–∏—Å–∫–∞ üç¨",
                },
                {
                    letter: "–Ü",
                    name: "–Ü",
                    sound: "—ñ",
                    emoji: "üß∏",
                    word: "–Ü–≥—Ä–∞—à–∫–∞",
                    example: "–Ü ‚Äî —ñ–≥—Ä–∞—à–∫–∞ üß∏",
                },
                {
                    letter: "–á",
                    name: "–á",
                    sound: "—ó",
                    emoji: "ü¶î",
                    word: "–á–∂–∞–∫",
                    example: "–á ‚Äî —ó–∂–∞–∫ ü¶î",
                },
                {
                    letter: "–ô",
                    name: "–ô–æ—Ç",
                    sound: "–π",
                    emoji: "ü•õ",
                    word: "–ô–æ–≥—É—Ä—Ç",
                    example: "–ô ‚Äî –π–æ–≥—É—Ä—Ç ü•õ",
                },
                {
                    letter: "–ö",
                    name: "–ö–∞",
                    sound: "–∫",
                    emoji: "üê±",
                    word: "–ö—ñ—à–∫–∞",
                    example: "–ö ‚Äî –∫—ñ—à–∫–∞ üê±",
                },
                {
                    letter: "–õ",
                    name: "–ï–ª",
                    sound: "–ª",
                    emoji: "üçã",
                    word: "–õ–∏–º–æ–Ω",
                    example: "–õ ‚Äî –ª–∏–º–æ–Ω üçã",
                },
                {
                    letter: "–ú",
                    name: "–ï–º",
                    sound: "–º",
                    emoji: "‚öΩ",
                    word: "–ú‚Äô—è—á",
                    example: "–ú ‚Äî –º‚Äô—è—á ‚öΩ",
                },
                {
                    letter: "–ù",
                    name: "–ï–Ω",
                    sound: "–Ω",
                    emoji: "ü¶è",
                    word: "–ù–æ—Å–æ—Ä—ñ–≥",
                    example: "–ù ‚Äî –Ω–æ—Å–æ—Ä—ñ–≥ ü¶è",
                },
                {
                    letter: "–û",
                    name: "–û",
                    sound: "–æ",
                    emoji: "‚úèÔ∏è",
                    word: "–û–ª—ñ–≤–µ—Ü—å",
                    example: "–û ‚Äî –æ–ª—ñ–≤–µ—Ü—å ‚úèÔ∏è",
                },
                {
                    letter: "–ü",
                    name: "–ü–µ",
                    sound: "–ø",
                    emoji: "üêº",
                    word: "–ü–∞–Ω–¥–∞",
                    example: "–ü ‚Äî –ø–∞–Ω–¥–∞ üêº",
                },
                {
                    letter: "–†",
                    name: "–ï—Ä",
                    sound: "—Ä",
                    emoji: "üêü",
                    word: "–†–∏–±–∫–∞",
                    example: "–† ‚Äî —Ä–∏–±–∫–∞ üêü",
                },
                {
                    letter: "–°",
                    name: "–ï—Å",
                    sound: "—Å",
                    emoji: "‚òÄÔ∏è",
                    word: "–°–æ–Ω—Ü–µ",
                    example: "–° ‚Äî —Å–æ–Ω—Ü–µ ‚òÄÔ∏è",
                },
                {
                    letter: "–¢",
                    name: "–¢–µ",
                    sound: "—Ç",
                    emoji: "üêØ",
                    word: "–¢–∏–≥—Ä",
                    example: "–¢ ‚Äî —Ç–∏–≥—Ä üêØ",
                },
                {
                    letter: "–£",
                    name: "–£",
                    sound: "—É",
                    emoji: "üå™Ô∏è",
                    word: "–£—Ä–∞–≥–∞–Ω",
                    example: "–£ ‚Äî —É—Ä–∞–≥–∞–Ω üå™Ô∏è",
                },
                {
                    letter: "–§",
                    name: "–ï—Ñ",
                    sound: "—Ñ",
                    emoji: "ü¶©",
                    word: "–§–ª–∞–º—ñ–Ω–≥–æ",
                    example: "–§ ‚Äî —Ñ–ª–∞–º—ñ–Ω–≥–æ ü¶©",
                },
                {
                    letter: "–•",
                    name: "–•–∞",
                    sound: "—Ö",
                    emoji: "‚òÅÔ∏è",
                    word: "–•–º–∞—Ä–∏–Ω–∫–∞",
                    example: "–• ‚Äî —Ö–º–∞—Ä–∏–Ω–∫–∞ ‚òÅÔ∏è",
                },
                {
                    letter: "–¶",
                    name: "–¶–µ",
                    sound: "—Ü",
                    emoji: "üç≠",
                    word: "–¶—É–∫–µ—Ä–∫–∞",
                    example: "–¶ ‚Äî —Ü—É–∫–µ—Ä–∫–∞ üç≠",
                },
                {
                    letter: "–ß",
                    name: "–ß–µ",
                    sound: "—á",
                    emoji: "üê¢",
                    word: "–ß–µ—Ä–µ–ø–∞—Ö–∞",
                    example: "–ß ‚Äî —á–µ—Ä–µ–ø–∞—Ö–∞ üê¢",
                },
                {
                    letter: "–®",
                    name: "–®–∞",
                    sound: "—à",
                    emoji: "üç´",
                    word: "–®–æ–∫–æ–ª–∞–¥",
                    example: "–® ‚Äî —à–æ–∫–æ–ª–∞–¥ üç´",
                },
                {
                    letter: "–©",
                    name: "–©–∞",
                    sound: "—â",
                    emoji: "üê∂",
                    word: "–©–µ–Ω—è",
                    example: "–© ‚Äî —â–µ–Ω—è üê∂",
                },
                {
                    letter: "–¨",
                    name: "–ú‚Äô—è–∫–∏–π –∑–Ω–∞–∫",
                    sound: "—å",
                    emoji: "üê¥",
                    word: "–ú‚Äô—è–∫–∏–π –∑–Ω–∞–∫",
                    example: "–¨ ‚Äî –º‚Äô—è–∫–∏–π –∑–Ω–∞–∫ üê¥",
                },
                {
                    letter: "–Æ",
                    name: "–Æ",
                    sound: "—é",
                    emoji: "ü™ê",
                    word: "–Æ–ø—ñ—Ç–µ—Ä",
                    example: "–Æ ‚Äî —é–ø—ñ—Ç–µ—Ä ü™ê",
                },
                {
                    letter: "–Ø",
                    name: "–Ø",
                    sound: "—è",
                    emoji: "üçì",
                    word: "–Ø–≥–æ–¥–∞",
                    example: "–Ø ‚Äî —è–≥–æ–¥–∞ üçì",
                },
            ];
            const ukrainianNumbers = [
                {
                    number: "0",
                    name: "–Ω—É–ª—å",
                    emoji: "0Ô∏è‚É£",
                    word: "–ù—É–ª—å",
                    example: "0 ‚Äî –Ω—É–ª—å 0Ô∏è‚É£",
                },
                {
                    number: "1",
                    name: "–æ–¥–∏–Ω",
                    emoji: "1Ô∏è‚É£",
                    word: "–û–¥–∏–Ω",
                    example: "1 ‚Äî –æ–¥–∏–Ω 1Ô∏è‚É£",
                },
                {
                    number: "2",
                    name: "–¥–≤–∞",
                    emoji: "2Ô∏è‚É£",
                    word: "–î–≤–∞",
                    example: "2 ‚Äî –¥–≤–∞ 2Ô∏è‚É£",
                },
                {
                    number: "3",
                    name: "—Ç—Ä–∏",
                    emoji: "3Ô∏è‚É£",
                    word: "–¢—Ä–∏",
                    example: "3 ‚Äî —Ç—Ä–∏ 3Ô∏è‚É£",
                },
                {
                    number: "4",
                    name: "—á–æ—Ç–∏—Ä–∏",
                    emoji: "4Ô∏è‚É£",
                    word: "–ß–æ—Ç–∏—Ä–∏",
                    example: "4 ‚Äî —á–æ—Ç–∏—Ä–∏ 4Ô∏è‚É£",
                },
                {
                    number: "5",
                    name: "–ø'—è—Ç—å",
                    emoji: "5Ô∏è‚É£",
                    word: "–ü'—è—Ç—å",
                    example: "5 ‚Äî –ø'—è—Ç—å 5Ô∏è‚É£",
                },
                {
                    number: "6",
                    name: "—à—ñ—Å—Ç—å",
                    emoji: "6Ô∏è‚É£",
                    word: "–®—ñ—Å—Ç—å",
                    example: "6 ‚Äî —à—ñ—Å—Ç—å 6Ô∏è‚É£",
                },
                {
                    number: "7",
                    name: "—Å—ñ–º",
                    emoji: "7Ô∏è‚É£",
                    word: "–°—ñ–º",
                    example: "7 ‚Äî —Å—ñ–º 7Ô∏è‚É£",
                },
                {
                    number: "8",
                    name: "–≤—ñ—Å—ñ–º",
                    emoji: "8Ô∏è‚É£",
                    word: "–í—ñ—Å—ñ–º",
                    example: "8 ‚Äî –≤—ñ—Å—ñ–º 8Ô∏è‚É£",
                },
                {
                    number: "9",
                    name: "–¥–µ–≤'—è—Ç—å",
                    emoji: "9Ô∏è‚É£",
                    word: "–î–µ–≤'—è—Ç—å",
                    example: "9 ‚Äî –¥–µ–≤'—è—Ç—å 9Ô∏è‚É£",
                },
                {
                    number: "10",
                    name: "–¥–µ—Å—è—Ç—å",
                    emoji: "üîü",
                    word: "–î–µ—Å—è—Ç—å",
                    example: "10 ‚Äî –¥–µ—Å—è—Ç—å üîü",
                },
            ];

            let currentIndex = 0;
            let learnedLetters = [];
            let currentMode = "learning";
            let score = 0;
            let currentQuestion = null;
            let isAutoPlay = false;
            let buttonsLocked = false;
            let selectedVoice = null;
            let shuffledAlphabet = [];
            let targetScore = 0; // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 0 = –±–µ–∑ –ª—ñ–º—ñ—Ç—ñ–≤
            let celebrationAudio = null;
            let currentTab = "letters"; // 'letters' –∞–±–æ 'numbers'
            let shuffledNumbers = [];
            let learnedNumbers = [];

            function shuffleAlphabet() {
                // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–ø—ñ—é –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–ª—Ñ–∞–≤—ñ—Ç—É
                shuffledAlphabet = [...ukrainianAlphabet];

                // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –∑–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º Fisher-Yates
                for (let i = shuffledAlphabet.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledAlphabet[i], shuffledAlphabet[j]] = [
                        shuffledAlphabet[j],
                        shuffledAlphabet[i],
                    ];
                }
            }

            function shuffleNumbers() {
                // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–ø—ñ—é –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –º–∞—Å–∏–≤—É —Ü–∏—Ñ—Ä
                shuffledNumbers = [...ukrainianNumbers];

                // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –∑–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º Fisher-Yates
                for (let i = shuffledNumbers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledNumbers[i], shuffledNumbers[j]] = [
                        shuffledNumbers[j],
                        shuffledNumbers[i],
                    ];
                }
            }

            function getCurrentArray() {
                return currentTab === "letters"
                    ? shuffledAlphabet
                    : shuffledNumbers;
            }

            function getCurrentLearnedArray() {
                return currentTab === "letters"
                    ? learnedLetters
                    : learnedNumbers;
            }

            function initializeVoices() {
                const voices = speechSynthesis.getVoices();

                // –®—É–∫–∞—î–º–æ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –≥–æ–ª–æ—Å–∏
                const ukrainianVoices = voices.filter(
                    (voice) =>
                        voice.lang.includes("uk") ||
                        voice.name.toLowerCase().includes("ukrain"),
                );

                // –Ø–∫—â–æ —î —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –≥–æ–ª–æ—Å–∏, –≤–∏–±–∏—Ä–∞—î–º–æ –ø–µ—Ä—à–∏–π
                if (ukrainianVoices.length > 0) {
                    selectedVoice = ukrainianVoices[0];
                } else {
                    // –Ø–∫—â–æ –Ω–µ–º–∞—î —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö, —à—É–∫–∞—î–º–æ –∂—ñ–Ω–æ—á—ñ –≥–æ–ª–æ—Å–∏
                    const femaleVoices = voices.filter(
                        (voice) =>
                            voice.name.toLowerCase().includes("female") ||
                            voice.name.toLowerCase().includes("woman") ||
                            voice.name.toLowerCase().includes("anna") ||
                            voice.name.toLowerCase().includes("maria"),
                    );

                    if (femaleVoices.length > 0) {
                        selectedVoice = femaleVoices[0];
                    } else {
                        // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–µ—Ä—à–∏–π –¥–æ—Å—Ç—É–ø–Ω–∏–π –≥–æ–ª–æ—Å
                        selectedVoice = voices[0];
                    }
                }

                console.log("–û–±—Ä–∞–Ω–∏–π –≥–æ–ª–æ—Å:", selectedVoice?.name);
            }

            function generateQuestion() {
                // –†–æ–∑–±–ª–æ–∫–æ–≤—É—î–º–æ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è
                buttonsLocked = false;

                // –í–∏–±–∏—Ä–∞—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –º–∞—Å–∏–≤—É
                const originalArray = getOriginalArray();
                const randomIndex = Math.floor(
                    Math.random() * originalArray.length,
                );
                const correctItem = originalArray[randomIndex];

                currentQuestion = correctItem;

                // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–∏—Ç–∞–Ω–Ω—è
                document.getElementById("questionEmoji").textContent =
                    correctItem.emoji;
                const questionType =
                    currentTab === "letters" ? "–±—É–∫–≤—É" : "—Ü–∏—Ñ—Ä—É";
                document.getElementById("questionText").textContent =
                    `–Ø–∫–∞ —Ü–µ ${questionType}? (${correctItem.word})`;

                // –û–∑–≤—É—á—É—î–º–æ —Å–ª–æ–≤–æ –µ–º–æ–¥–∑—ñ –ø—Ä–∏ –ø–æ—è–≤—ñ –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è
                if ("speechSynthesis" in window) {
                    const utterance = new SpeechSynthesisUtterance(
                        correctItem.word,
                    );
                    utterance.lang = "uk-UA";
                    utterance.rate = 0.9;
                    utterance.pitch = 1.2;

                    if (selectedVoice) {
                        utterance.voice = selectedVoice;
                    }

                    speechSynthesis.speak(utterance);
                }

                // –î–æ–¥–∞—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –µ—Ñ–µ–∫—Ç –¥–æ –µ–º–æ–¥–∑—ñ –ø—Ä–∏ –æ–∑–≤—É—á—É–≤–∞–Ω–Ω—ñ
                const emoji = document.getElementById("questionEmoji");
                emoji.style.transform = "scale(1.2)";
                emoji.style.filter = "brightness(1.3)";

                setTimeout(() => {
                    emoji.style.transform = "scale(1)";
                    emoji.style.filter = "brightness(1)";
                }, 800);

                // –ì–µ–Ω–µ—Ä—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
                generateAnswerOptions(correctItem);
            }

            function getOriginalArray() {
                return currentTab === "letters"
                    ? ukrainianAlphabet
                    : ukrainianNumbers;
            }

            function generateAnswerOptions(correctItem) {
                const options = [correctItem];
                const originalArray = getOriginalArray();

                // –î–æ–¥–∞—î–º–æ 4 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏
                while (options.length < 5) {
                    const randomItem =
                        originalArray[
                            Math.floor(Math.random() * originalArray.length)
                        ];

                    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ–± –≤–∞—Ä—ñ–∞–Ω—Ç –Ω–µ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–≤—Å—è
                    const correctValue =
                        currentTab === "letters"
                            ? correctItem.letter
                            : correctItem.number;
                    const randomValue =
                        currentTab === "letters"
                            ? randomItem.letter
                            : randomItem.number;
                    const isDuplicate = options.some((option) => {
                        const optionValue =
                            currentTab === "letters"
                                ? option.letter
                                : option.number;
                        return optionValue === randomValue;
                    });

                    if (!isDuplicate) {
                        options.push(randomItem);
                    }
                }

                // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è
                options.sort(() => Math.random() - 0.5);

                // –û—á–∏—â—É—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞ —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—ñ –∫–Ω–æ–ø–∫–∏
                const container = document.getElementById("answerOptions");
                container.innerHTML = "";

                options.forEach((option) => {
                    const btn = document.createElement("button");
                    btn.className = "answer-btn";
                    btn.textContent =
                        currentTab === "letters"
                            ? option.letter
                            : option.number;
                    btn.onclick = () => checkAnswer(option, btn);

                    // –î–æ–¥–∞—î–º–æ hover –µ—Ñ–µ–∫—Ç
                    btn.addEventListener("mouseenter", () => {
                        if (!buttonsLocked) {
                            btn.style.transform = "scale(1.1)";
                        }
                    });

                    btn.addEventListener("mouseleave", () => {
                        if (!buttonsLocked) {
                            btn.style.transform = "scale(1)";
                        }
                    });

                    container.appendChild(btn);
                });
            }

            function checkAnswer(selectedItem, buttonElement) {
                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ –∫–Ω–æ–ø–∫–∏
                if (buttonsLocked) {
                    return;
                }

                // –ë–ª–æ–∫—É—î–º–æ –≤—Å—ñ –∫–Ω–æ–ø–∫–∏ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è
                buttonsLocked = true;
                const allButtons = document.querySelectorAll(".answer-btn");
                allButtons.forEach((btn) => {
                    btn.disabled = true;
                    btn.style.opacity = "0.6";
                    btn.style.cursor = "not-allowed";
                });

                const currentValue =
                    currentTab === "letters"
                        ? selectedItem.letter
                        : selectedItem.number;
                const correctValue =
                    currentTab === "letters"
                        ? currentQuestion.letter
                        : currentQuestion.number;
                const isCorrect = currentValue === correctValue;

                if (isCorrect) {
                    // –ó–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
                    buttonElement.style.backgroundColor = "#00b894";
                    buttonElement.style.color = "white";
                    buttonElement.classList.add("correct");
                    score += 10;
                    showCelebration("üéâ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ");
                    saveProgressToCloud();
                    setTimeout(() => {
                        generateQuestion();
                    }, 1500);
                } else {
                    // –ß–µ—Ä–≤–æ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
                    buttonElement.style.backgroundColor = "#e17055";
                    buttonElement.style.color = "white";
                    buttonElement.classList.add("incorrect");
                    score = Math.max(0, score - 5);
                    showCelebration("‚ùå –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!");
                    saveProgressToCloud();

                    // –ù–ï –ø–æ–∫–∞–∑—É—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
                    setTimeout(() => {
                        generateQuestion();
                    }, 1500);
                }

                updateProgress();
            }

            // –î–æ–¥–∞–π—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –æ–∑–≤—É—á—É–≤–∞–Ω–Ω—è –µ–º–æ–¥–∑—ñ –≤ —Ä–µ–∂–∏–º—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
            function playQuestionEmojiSound() {
                if (currentQuestion && "speechSynthesis" in window) {
                    const utterance = new SpeechSynthesisUtterance(
                        currentQuestion.word,
                    );
                    utterance.lang = "uk-UA";
                    utterance.rate = 0.9;
                    utterance.pitch = 1.2;
                    speechSynthesis.speak(utterance);

                    // –í—ñ–∑—É–∞–ª—å–Ω–∏–π –µ—Ñ–µ–∫—Ç
                    const emoji = document.getElementById("questionEmoji");
                    emoji.style.transform = "scale(1.3)";
                    emoji.style.filter = "brightness(1.3)";

                    setTimeout(() => {
                        emoji.style.transform = "scale(1)";
                        emoji.style.filter = "brightness(1)";
                    }, 600);
                }
            }

            function switchMode(mode) {
                currentMode = mode;

                // –û–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫–∏ —Ä–µ–∂–∏–º—ñ–≤
                document
                    .getElementById("learningBtn")
                    .classList.toggle("active", mode === "learning");
                document
                    .getElementById("trainingBtn")
                    .classList.toggle("active", mode === "training");

                // –ü–æ–∫–∞–∑—É—î–º–æ/—Ö–æ–≤–∞—î–º–æ —Ä–µ–∂–∏–º–∏
                document
                    .getElementById("learningMode")
                    .classList.toggle("active", mode === "learning");
                document
                    .getElementById("trainingMode")
                    .classList.toggle("active", mode === "training");

                // –ü–æ–∫–∞–∑—É—î–º–æ/—Ö–æ–≤–∞—î–º–æ —Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∂–∏–º—É
                const scoreDisplay = document.getElementById("scoreDisplay");
                if (mode === "training") {
                    scoreDisplay.style.display = "block";
                    generateQuestion();
                } else {
                    scoreDisplay.style.display = "none";
                    updateDisplay();
                }
            }

            function updateDisplay() {
                const current = getCurrentArray()[currentIndex];
                const displayValue =
                    currentTab === "letters" ? current.letter : current.number;

                document.getElementById("currentLetter").textContent =
                    displayValue;
                document.getElementById("emojiDisplay").textContent =
                    current.emoji;
                document.getElementById("letterName").textContent =
                    `${displayValue} - "${current.name}"`;
                document.getElementById("letterExample").textContent =
                    current.example;
                document.getElementById("letterSound").textContent =
                    `–ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ ${currentTab === "letters" ? "–±—É–∫–≤—É" : "—Ü–∏—Ñ—Ä—É"} –∞–±–æ –µ–º–æ–¥–∑—ñ!`;

                updateProgress();
                updateAlphabetGrid();
            }

            function updateProgress() {
                const learned = getCurrentLearnedArray().length;
                const total = getCurrentArray().length;
                const percentage = (learned / total) * 100;

                document.getElementById("progressFill").style.width =
                    percentage + "%";
                document.getElementById("progressText").textContent =
                    `–ü—Ä–æ–≥—Ä–µ—Å: ${learned}/${total}`;

                // –ü–æ–∫–∞–∑—É—î–º–æ —Ä–∞—Ö—É–Ω–æ–∫ —Ç—ñ–ª—å–∫–∏ –≤ —Ä–µ–∂–∏–º—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
                if (currentMode === "training") {
                    if (targetScore > 0) {
                        document.getElementById("scoreDisplay").textContent =
                            `–†–∞—Ö—É–Ω–æ–∫: ${score}/${targetScore}`;

                        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –¥–æ—Å—è–≥–Ω—É—Ç–∞ —Ü—ñ–ª—å
                        if (score >= targetScore) {
                            setTimeout(() => {
                                showVictoryScreen();
                            }, 500);
                        }
                    } else {
                        document.getElementById("scoreDisplay").textContent =
                            `–†–∞—Ö—É–Ω–æ–∫: ${score}`;
                    }
                } else {
                    // –í —Ä–µ–∂–∏–º—ñ –Ω–∞–≤—á–∞–Ω–Ω—è –Ω–µ –ø–æ–∫–∞–∑—É—î–º–æ —Ä–∞—Ö—É–Ω–æ–∫
                    document.getElementById("scoreDisplay").style.display =
                        "none";
                }
            }

            function updateAlphabetGrid() {
                const grid = document.getElementById("alphabetGrid");
                grid.innerHTML = "";

                // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –º–∞—Å–∏–≤ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∞–±—É
                const originalArray = getOriginalArray();
                const learnedArray = getCurrentLearnedArray();
                const currentArray = getCurrentArray();

                originalArray.forEach((item, index) => {
                    const btn = document.createElement("button");
                    btn.className = "alphabet-btn";
                    btn.textContent =
                        currentTab === "letters" ? item.letter : item.number;
                    btn.onclick = () => {
                        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ —ñ–Ω–¥–µ–∫—Å —Ü—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –≤ –ø–µ—Ä–µ–º—ñ—à–∞–Ω–æ–º—É –º–∞—Å–∏–≤—ñ
                        const displayValue =
                            currentTab === "letters"
                                ? item.letter
                                : item.number;
                        const shuffledIndex = currentArray.findIndex(
                            (shuffledItem) => {
                                const shuffledValue =
                                    currentTab === "letters"
                                        ? shuffledItem.letter
                                        : shuffledItem.number;
                                return shuffledValue === displayValue;
                            },
                        );
                        if (shuffledIndex !== -1) {
                            currentIndex = shuffledIndex;
                            updateDisplay();
                            playSound();
                        }
                    };

                    const itemValue =
                        currentTab === "letters" ? item.letter : item.number;
                    if (learnedArray.includes(itemValue)) {
                        btn.classList.add("learned");
                    }

                    grid.appendChild(btn);
                });
            }

            function switchTab(tab) {
                currentTab = tab;

                // –û–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫–∏ —Ç–∞–±—ñ–≤
                document
                    .getElementById("lettersTab")
                    .classList.toggle("active", tab === "letters");
                document
                    .getElementById("numbersTab")
                    .classList.toggle("active", tab === "numbers");

                // –°–∫–∏–¥–∞—î–º–æ —ñ–Ω–¥–µ–∫—Å
                currentIndex = 0;

                // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
                if (tab === "letters") {
                    shuffleAlphabet();
                } else {
                    shuffleNumbers();
                }

                // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                updateDisplay();
                updateProgress();
            }

            function playSound() {
                const current = getCurrentArray()[currentIndex];
                const displayValue =
                    currentTab === "letters" ? current.letter : current.number;

                if ("speechSynthesis" in window) {
                    const utterance = new SpeechSynthesisUtterance(
                        `${displayValue}. ${current.word}.`,
                    );
                    utterance.lang = "uk-UA";
                    utterance.rate = 0.8;
                    utterance.pitch = 1.1;

                    if (selectedVoice) {
                        utterance.voice = selectedVoice;
                    }

                    speechSynthesis.speak(utterance);
                }

                // –î–æ–¥–∞—î–º–æ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –µ—Ñ–µ–∫—Ç –¥–æ –±—É–∫–≤–∏/—Ü–∏—Ñ—Ä–∏
                const letter = document.getElementById("currentLetter");
                letter.style.transform = "scale(1.2)";
                letter.style.color = "#00b894";

                // –î–æ–¥–∞—î–º–æ –µ—Ñ–µ–∫—Ç –¥–æ –µ–º–æ–¥–∑—ñ
                const emoji = document.getElementById("emojiDisplay");
                emoji.style.transform = "scale(1.3)";

                setTimeout(() => {
                    letter.style.transform = "scale(1)";
                    letter.style.color = "#2d3436";
                    emoji.style.transform = "scale(1)";
                }, 500);
            }

            function createCelebrationMusic() {
                try {
                    // –°—Ç–≤–æ—Ä—é—î–º–æ –≤–µ—Å–µ–ª—É –º–µ–ª–æ–¥—ñ—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Web Audio API
                    const audioContext = new (window.AudioContext ||
                        window.webkitAudioContext)();

                    // –ù–æ—Ç–∏ –¥–ª—è –≤–µ—Å–µ–ª–æ—ó –º–µ–ª–æ–¥—ñ—ó (–î–æ –º–∞–∂–æ—Ä)
                    const notes = [
                        { freq: 523.25, duration: 0.3 }, // –î–æ
                        { freq: 587.33, duration: 0.3 }, // –†–µ
                        { freq: 659.25, duration: 0.3 }, // –ú—ñ
                        { freq: 698.46, duration: 0.3 }, // –§–∞
                        { freq: 783.99, duration: 0.6 }, // –°–æ–ª—å
                        { freq: 698.46, duration: 0.3 }, // –§–∞
                        { freq: 659.25, duration: 0.3 }, // –ú—ñ
                        { freq: 587.33, duration: 0.3 }, // –†–µ
                        { freq: 523.25, duration: 0.6 }, // –î–æ
                    ];

                    let currentTime = audioContext.currentTime;

                    notes.forEach((note) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.frequency.setValueAtTime(
                            note.freq,
                            currentTime,
                        );
                        oscillator.type = "triangle";

                        gainNode.gain.setValueAtTime(0, currentTime);
                        gainNode.gain.linearRampToValueAtTime(
                            0.3,
                            currentTime + 0.01,
                        );
                        gainNode.gain.exponentialRampToValueAtTime(
                            0.01,
                            currentTime + note.duration,
                        );

                        oscillator.start(currentTime);
                        oscillator.stop(currentTime + note.duration);

                        currentTime += note.duration;
                    });
                } catch (error) {
                    console.log("–ú—É–∑–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ü—å–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ");
                }
            }

            function showVictoryScreen() {
                const victoryScreen = document.createElement("div");
                victoryScreen.className = "victory-celebration";
                victoryScreen.innerHTML = `
                    <div class="victory-content">
                        <div class="victory-emoji">üéâüèÜüéä</div>
                        <div class="victory-text">–í—ñ—Ç–∞—î–º–æ! –¶—ñ–ª—å –¥–æ—Å—è–≥–Ω—É—Ç–∞!</div>
                        <div class="victory-score">–í–∏ –Ω–∞–±—Ä–∞–ª–∏ ${score} –ø–æ—ó–Ω—Ç—ñ–≤!</div>
                        <button class="continue-btn" onclick="closeVictoryScreen()">
                            –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è
                        </button>
                    </div>
                `;

                document.body.appendChild(victoryScreen);

                // –ó–∞–ø—É—Å–∫–∞—î–º–æ —Å–≤—è—Ç–∫–æ–≤—É –º—É–∑–∏–∫—É
                createCelebrationMusic();

                // –ü–æ–≤—Ç–æ—Ä—é—î–º–æ –º—É–∑–∏–∫—É –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤
                setTimeout(() => createCelebrationMusic(), 1000);
                setTimeout(() => createCelebrationMusic(), 2000);
            }

            function closeVictoryScreen() {
                const victoryScreen = document.querySelector(
                    ".victory-celebration",
                );

                targetScore = 0;

                if (victoryScreen) {
                    document.body.removeChild(victoryScreen);
                }
            }

            function setTargetScore() {
                // –°–∫–ª–∞–¥–Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–ª—è –±–∞—Ç—å–∫—ñ–≤
                const mathQuestion = Math.floor(Math.random() * 10) + 5; // –ß–∏—Å–ª–æ –≤—ñ–¥ 5 –¥–æ 14
                const mathAnswer = mathQuestion * 3; // –°–∫–ª–∞–¥–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞

                const userAnswer = prompt(
                    `–ë–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å:\n–û–±—á–∏—Å–ª—ñ—Ç—å: ${mathQuestion} √ó 3 = ?`,
                );

                if (parseInt(userAnswer) === mathAnswer) {
                    const newTarget = parseInt(
                        document.getElementById("targetScoreInput").value,
                    );
                    targetScore = newTarget;

                    if (targetScore === 0) {
                        showCelebration("‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: –±–µ–∑ –ª—ñ–º—ñ—Ç—ñ–≤ –ø–æ—ó–Ω—Ç—ñ–≤");
                    } else {
                        showCelebration(
                            `‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ü—ñ–ª—å: ${targetScore} –ø–æ—ó–Ω—Ç—ñ–≤`,
                        );
                    }

                    updateProgress();
                } else {
                    alert(
                        "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å! –¢—ñ–ª—å–∫–∏ –±–∞—Ç—å–∫–∏ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.",
                    );
                    // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è
                    document.getElementById("targetScoreInput").value =
                        targetScore;
                }
            }

            function playEmojiSound() {
                const current = getCurrentArray()[currentIndex];

                if ("speechSynthesis" in window) {
                    const utterance = new SpeechSynthesisUtterance(
                        current.word,
                    );
                    utterance.lang = "uk-UA";
                    utterance.rate = 0.9;
                    utterance.pitch = 1.2;

                    if (selectedVoice) {
                        utterance.voice = selectedVoice;
                    }

                    speechSynthesis.speak(utterance);
                }

                // –í—ñ–∑—É–∞–ª—å–Ω–∏–π –µ—Ñ–µ–∫—Ç –¥–ª—è –µ–º–æ–¥–∑—ñ
                const emoji = document.getElementById("emojiDisplay");
                emoji.style.transform = "scale(1.4)";
                emoji.style.filter = "brightness(1.2)";

                setTimeout(() => {
                    emoji.style.transform = "scale(1)";
                    emoji.style.filter = "brightness(1)";
                }, 600);
            }

            function playQuestionEmojiSound() {
                if (currentQuestion && "speechSynthesis" in window) {
                    const utterance = new SpeechSynthesisUtterance(
                        currentQuestion.word,
                    );
                    utterance.lang = "uk-UA";
                    utterance.rate = 0.9;
                    utterance.pitch = 1.2;

                    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ–±—Ä–∞–Ω–∏–π –≥–æ–ª–æ—Å
                    if (selectedVoice) {
                        utterance.voice = selectedVoice;
                    }

                    speechSynthesis.speak(utterance);

                    // –í—ñ–∑—É–∞–ª—å–Ω–∏–π –µ—Ñ–µ–∫—Ç
                    const emoji = document.getElementById("questionEmoji");
                    emoji.style.transform = "scale(1.3)";
                    emoji.style.filter = "brightness(1.3)";

                    setTimeout(() => {
                        emoji.style.transform = "scale(1)";
                        emoji.style.filter = "brightness(1)";
                    }, 600);
                }
            }

            function nextLetter() {
                const currentArray = getCurrentArray();
                currentIndex = (currentIndex + 1) % currentArray.length;
                updateDisplay();
                playSound();
            }

            function previousLetter() {
                const currentArray = getCurrentArray();
                currentIndex =
                    currentIndex === 0
                        ? currentArray.length - 1
                        : currentIndex - 1;
                updateDisplay();
                playSound();
            }

            function markAsLearned() {
                const current = getCurrentArray()[currentIndex];
                const currentValue =
                    currentTab === "letters" ? current.letter : current.number;
                const learnedArray = getCurrentLearnedArray();

                if (!learnedArray.includes(currentValue)) {
                    learnedArray.push(currentValue);

                    const itemType =
                        currentTab === "letters" ? "–±—É–∫–≤—É" : "—Ü–∏—Ñ—Ä—É";
                    showCelebration(
                        `‚úÖ –ú–æ–ª–æ–¥–µ—Ü—å! ${itemType.charAt(0).toUpperCase() + itemType.slice(1)} –≤–∏–≤—á–µ–Ω–æ!`,
                    );
                    updateProgress();

                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å
                    saveProgressToCloud();

                    setTimeout(() => {
                        nextLetter();
                    }, 1500);
                } else {
                    const itemType =
                        currentTab === "letters" ? "–±—É–∫–≤–∞" : "—Ü–∏—Ñ—Ä–∞";
                    showCelebration(`üìö –¶—è ${itemType} –≤–∂–µ –≤–∏–≤—á–µ–Ω–∞!`);
                }
            }

            function showCelebration(message = "üéâ –ú–æ–ª–æ–¥–µ—Ü—å! üéâ") {
                const celebration = document.createElement("div");
                celebration.className = "celebration";
                celebration.textContent = message;

                // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä—ñ–∑–Ω—ñ –∫–æ–ª—å–æ—Ä–∏ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
                if (message.includes("–ü—Ä–∞–≤–∏–ª—å–Ω–æ")) {
                    celebration.style.color = "#00b894"; // –ó–µ–ª–µ–Ω–∏–π –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
                    celebration.style.textShadow =
                        "2px 2px 4px rgba(0, 184, 148, 0.3)";
                } else if (message.includes("–°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑")) {
                    celebration.style.color = "#e17055"; // –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
                    celebration.style.textShadow =
                        "2px 2px 4px rgba(225, 112, 85, 0.3)";
                } else {
                    celebration.style.color = "#fdcb6e"; // –ñ–æ–≤—Ç–∏–π –¥–ª—è –∑–∞–≥–∞–ª—å–Ω–∏—Ö —Å–≤—è—Ç–∫—É–≤–∞–Ω—å
                    celebration.style.textShadow =
                        "2px 2px 4px rgba(253, 203, 110, 0.3)";
                }

                // –î–æ–¥–∞—î–º–æ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∏–ª—å
                celebration.style.fontWeight = "bold";
                celebration.style.fontSize = "3rem";

                document.body.appendChild(celebration);

                setTimeout(() => {
                    if (document.body.contains(celebration)) {
                        document.body.removeChild(celebration);
                    }
                }, 1000);
            }

            function practiceWriting() {
                const writingArea = document.getElementById("writingArea");
                const current = getCurrentArray()[currentIndex];
                const currentValue =
                    currentTab === "letters" ? current.letter : current.number;

                writingArea.innerHTML = `
                    <div style="font-size: 4rem; color: #ddd; position: absolute; z-index: 1;">${currentValue}</div>
                    <div style="position: relative; z-index: 2; font-size: 1rem;">
                        –û–±–≤–µ–¥–∏ ${currentTab === "letters" ? "–±—É–∫–≤—É" : "—Ü–∏—Ñ—Ä—É"} –ø–∞–ª—å—Ü–µ–º –∞–±–æ –º–∏—à–∫–æ—é!<br>
                        <small>(—Ñ—É–Ω–∫—Ü—ñ—è –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)</small>
                    </div>
                `;
            }

            // –î–æ–¥–∞—î–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞—Ç–∏—Å–∫–∞—Ç–∏ –Ω–∞ –µ–º–æ–¥–∑—ñ
            document.addEventListener("DOMContentLoaded", () => {
                // –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –µ–º–æ–¥–∑—ñ –≤ —Ä–µ–∂–∏–º—ñ –Ω–∞–≤—á–∞–Ω–Ω—è - –æ–∑–≤—É—á—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —Å–ª–æ–≤–æ
                document
                    .getElementById("emojiDisplay")
                    .addEventListener("click", playEmojiSound);

                // –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –µ–º–æ–¥–∑—ñ –≤ —Ä–µ–∂–∏–º—ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è - –æ–∑–≤—É—á—É—î–º–æ —Å–ª–æ–≤–æ –ø–∏—Ç–∞–Ω–Ω—è
                document
                    .getElementById("questionEmoji")
                    .addEventListener("click", playQuestionEmojiSound);

                // –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –±—É–∫–≤—É - –ø–æ–≤–Ω–∞ –æ–∑–≤—É—á–∫–∞
                document
                    .getElementById("currentLetter")
                    .addEventListener("click", playSound);
            });

            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
            shuffleAlphabet();
            shuffleNumbers();
            updateDisplay();

            // –î–æ–¥–∞—î–º–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
            document.addEventListener("keydown", (e) => {
                switch (e.key) {
                    case "ArrowLeft":
                        previousLetter();
                        break;
                    case "ArrowRight":
                        nextLetter();
                        break;
                    case " ":
                        e.preventDefault();
                        playSound();
                        break;
                    case "Enter":
                        markAsLearned();
                        break;
                }
            });

            // –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ touch –ø–æ–¥—ñ–π –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö
            let touchStartX = 0;
            let touchEndX = 0;

            document.addEventListener("touchstart", (e) => {
                touchStartX = e.changedTouches[0].screenX;
            });

            document.addEventListener("touchend", (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });

            function handleSwipe() {
                const swipeThreshold = 50;
                const diff = touchStartX - touchEndX;

                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        nextLetter(); // –°–≤–∞–π–ø –≤–ª—ñ–≤–æ = –Ω–∞—Å—Ç—É–ø–Ω–∞ –±—É–∫–≤–∞
                    } else {
                        previousLetter(); // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ = –ø–æ–ø–µ—Ä–µ–¥–Ω—è –±—É–∫–≤–∞
                    }
                }
            }

            speechSynthesis.addEventListener("voiceschanged", initializeVoices);
            initializeVoices(); // –í–∏–∫–ª–∏–∫–∞—î–º–æ –æ–¥—Ä–∞–∑—É –Ω–∞ –≤–∏–ø–∞–¥–æ–∫, —è–∫—â–æ –≥–æ–ª–æ—Å–∏ –≤–∂–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ
        </script>
    </body>
</html>
